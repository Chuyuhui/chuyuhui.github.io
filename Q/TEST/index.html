<html><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Fill google form via ajax</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript" src="script_SD.js"></script>

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
      <script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
      <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <style id="compiled-css" type="text/css">
      
    /* EOS */
  </style>

  <script id="insert"></script>


</head>
<body>
    <div class="container">
  <h1>Fill google form via ajax</h1>

  <div id="feedback"><label class="text-success">Message sent!</label></div>

  <form method="post" id="contact-form">
    <div class="form-group">
      <label>Name: *</label>
      <input type="text" class="form-control" id="form-name" placeholder="Name">
    </div>
    <div class="form-group">
      <label>Email: *</label>
      <input type="text" class="form-control" id="form-email" placeholder="Email">
    </div>
    <div class="form-group">
      <label>Phone:</label>
      <input type="text" class="form-control" id="form-phone" placeholder="Phone">
    </div>
    <div class="form-group">
      <label>Message:</label>
      <textarea type="text" class="form-control" id="form-message" placeholder="Message"></textarea>
    </div>
    <button type="submit" class="btn btn-default">
      Send message
    </button>
  </form>
  <br>
  <br>
  
  <p>Check google form <a href="https://goo.gl/tc7hkF" target="_blank">here</a>.</p>
  <p>Check google form answers <a href="https://goo.gl/VXMdV5" target="_blank">here</a>.</p>
  <p>Check my blog post about this code <a href="https://goo.gl/ayVvfS" target="_blank">here</a>.</p>
</div>

    <script type="text/javascript">//<![CDATA[


// Process contact form
$('#contact-form').submit(function(event) {
  event.preventDefault();
  $('#feedback').html('');
  setTimeout(function() {
  	// Get data
    var data = {
      'entry.568194084': $('#form-name').val(),
      'entry.1303875942': $('#form-email').val(),
      'entry.807958025': $('#form-phone').val(),
      'entry.703388132': $('#form-message').val()
    };

    // Validate form
    var formSuccess = true;
    Object.keys(data).forEach(function(key, index) {
      if (!data[key]) {
        formSuccess = false;
        $('#feedback').html('<label class="text-danger">Please complete all fields</label>');
      }
    });

    if (formSuccess) {
      // Send request
      $.ajax({
        url: 'https://docs.google.com/forms/d/e/1FAIpQLSdnW7ixrovoi7V7sJQihWouPztZL4GoRMAP5SpoVh2UfMhxOQ/formResponse',
        type: 'POST',
        crossDomain: true,
        dataType: "xml",
        data: data,
        success: function(jqXHR, textStatus, errorThrown) {
          console.log('Enter on success');
          $('#feedback').html('<label class="text-success">Message sent!</label>');
        },
        error: function(jqXHR, textStatus, errorThrown) {
          console.log('Enter on error');
          $('#feedback').html('<label class="text-success">Message sent!</label>');
        }
      });
    }
  }, 300);
});



  //]]></script>

  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "g7ftfkvb"
      }], "*")
    }

    // always overwrite window.name, in case users try to set it manually
    window.name = "result"
  </script>

    <script>
      let allLines = []

      window.addEventListener("message", (message) => {
        if (message.data.console){
          let insert = document.querySelector("#insert")
          allLines.push(message.data.console.payload)
          insert.innerHTML = allLines.join(";\r")

          let result = eval.call(null, message.data.console.payload)
          if (result !== undefined){
            console.log(result)
          }
        }
      })
    </script>



</body></html>